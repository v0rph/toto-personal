--- 
title: Adding a Real Time Clock to the Raspberry pi
date: 07/11/2012
tags: raspberry pi, rtc, howto

The Raspberry pi is an amazing device with an amazing price tag. But that also means some compromises have to be made. And one of the most notorious is the lack of a real time clock module.  
Should you turn off the device, the next time you boot the time will be all wrong.  
The regular way to maintain system time on the pi is via ntp, connecting to a server from the internet and syncing from there. Of course this assumes the device has an internet connection everytime it reboots.

There are some simple software alternatives that attempt to maintain some sync by, say, saving the current time to file and then resuming it on boot, thus reducing the error.  
This may not be a problem for some, but for my projects I really needed an accurate clock without the assurance of an internet connection.

Fortunately there are a number of hardware solutions out there, ranging from usb gps devices to actual RTC modules that you can plug right on the pi's connectors.
For this How-to I'm using an RTC module I purchased from CJE Micro's / 4D. You can find it [here](http://www.cjemicros.co.uk/micros/individual/newprodpages/prodinfo.php?prodcode=4D-RaspberryPi-RealTimeClock-RTC). They go for 10Â£ (plus shipping).  

((image))http://www.cjemicros.co.uk/micros/individual/newprodpages/prodinfo.php?prodcode=4D-RaspberryPi-RealTimeClock-RTC  

The pi is running raspbian ((VERSION)) with the required drivers already on the kernel.  
code(sudo apt-get install I2c-tools)  
code(modprobe i2c-dev)  
code(modprobe i2c-XXXXX)  
Now the RTC has a DS1338 chip, which is supported by the ds1307 driver, so  
code(modprobe ds1307)  
We can run a check on the devices currently connected  
code(sudo i2cidentify -y 0)  
a "68" should indicate your RTC is connected correctly  
now we must SOMETHINNG. To do that we must open a root shell  
code(sudo bash)  
code(echo slalaslas > xxxxx  
now we can leave the root shell  
code(exit)  
and finally  
code(sudo hwclock -r)  
if all goes well this should tell system time as read from the rtc  
It may be off you can sync it with ntp by running  
code(ntp bla bla)  
or updating yourself manually????  
code(MANUAL TIME)  
